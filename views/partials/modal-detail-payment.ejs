<!-- Modal Detail -->
<div id="modal-detail-payment" class="w3-modal w3-display-container" style="padding:16px 0">
  <div class="w3-modal-content w3-card-4 w3-animate-opacity w3-display-middle" style="max-width:700px">
    <header class="w3-container w3-blue-grey">
      <h3><i class="fa fa-money"></i> Detail Pembayaran</h3>
      <span class="w3-button w3-hover-red w3-display-topright" style="cursor:pointer" onclick="closeModal('modal-detail-payment')"><i class="fa fa-close"></i></span>
    </header>
      <div class="w3-display-container" style="max-width:700px;margin:auto">
        <img class="w3-greyscale-min" style="width:100%;height:300px;object-fit:cover" src="<%=%>">
        <p class="w3-display-topmiddle w3-text-white"><b><%=%></b></p>  
        <p class="w3-display-bottommiddle w3-text-white"><b>Rp. <%=%></b></p>  
        
      </div>
      <div class="w3-container w3-padding-16 w3-center w3-text-grey" style="width:100%">
      <img class="w3-circle w3-card" style="width:15%" src="/uploads/<%=%>">
      <p>Agent: <%=%></p>
      <hr class="w3-hr">
      <label class="w3-left">Pesan Tambahan:</label>
      <textarea id="payments-message" placeholder="Ex: Saya Booking dengan DP 50%" rows="3" class="w3-input w3-border w3-text-grey w3-hover-light-grey" type="text" style="resize:vertical">Ex: Saya Booking dengan DP 50%</textarea>
      <hr>
      
      <!-- <div class="w3-bar">
        <button id="btn-send-payments" class="w3-button w3-blue w3-hover-green"><i class="fa fa-ban"></i> Tolak</button>
        <button id="btn-send-payments" class="w3-button w3-blue w3-hover-green"><i class="fa fa-check"></i> Terima</button>
      </div> -->
    
    </div>
  </div>
</div>

<script>
var id = 0;
var mia = document.getElementById('modal-id-approve');
var mda = document.getElementById('modal-data-approve');
var mid = document.getElementById('modal-id-delete');
var mdd = document.getElementById('modal-data-delete');
var dataPayment = {};

//ADD EVENT LISTENER
var btnConfirm = document.getElementsByClassName('confirm-button');
for(var i=0,len=btnConfirm.length;i<len;i++){
  btnConfirm[i].addEventListener('click',setDataPayment);
}

function setDataPayment(){
  dataPayment.listing = this.dataset.listing;
  dataPayment.customer = this.dataset.customer;
  dataPayment.agent = this.dataset.agent;
  // alert(`
  //   listing: ${dataPayment.listing} 
  //   customer: ${dataPayment.customer} 
  //   agent: ${dataPayment.agent}`);
}

  function openModal(el) {
    document.getElementById(el).style.display = "block";
    document.body.style.overflow = "hidden";
  }
  function closeModal(el) {
    document.getElementById(el).style.display = "none";
    document.body.style.overflow = "visible";
  }
  function modalDetailPayment(id,username){
    id = id;
    openModal('modal-confirm-denied-repayment');
    mid.innerHTML = id;
    mdd.innerHTML = username;
  }
  
  function detailPayment(id){
    fetch(`/api/payment/repayment-denied/${id}`,{
      method:'GET'
    }).then((res)=>{
      mdd.innerHTML = res.text();
      location.reload();
    })
  }

</script>